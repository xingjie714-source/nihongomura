let currentLang=localStorage.getItem('language')||'ja';function setLanguage(e){currentLang=e,localStorage.setItem('language',e),updatePageContent(),updateLanguageButtons()}function updatePageContent(){document.querySelectorAll('[data-ja], [data-en], [data-zh]').forEach(e=>{const t=`data-${currentLang}`,a=e.getAttribute(t);if(a)if('INPUT'===e.tagName||'TEXTAREA'===e.tagName)e.hasAttribute('placeholder')?e.placeholder=a:e.textContent=a;else if('OPTION'===e.tagName)e.textContent=a;else if('TITLE'===e.tagName)document.title=a;else e.textContent=a}),document.documentElement.lang=currentLang}function updateLanguageButtons(){document.querySelectorAll('.lang-btn').forEach(e=>e.classList.remove('active'));const e=document.querySelector(`.lang-btn[data-lang="${currentLang}"]`);e&&e.classList.add('active')}document.addEventListener('DOMContentLoaded',()=>{document.querySelectorAll('.lang-btn').forEach(e=>{e.addEventListener('click',()=>{setLanguage(e.getAttribute('data-lang'))})}),updatePageContent(),updateLanguageButtons()});const observer=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.length&&updatePageContent()})});document.body&&observer.observe(document.body,{childList:!0,subtree:!0});
